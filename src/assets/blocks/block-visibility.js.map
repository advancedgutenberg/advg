{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/blocks/0-adv-components/components.jsx","webpack:///./src/assets/blocks/block-visibility/block-visibility.jsx"],"names":["AdvColorControl","AdvDateTimeControl","props","wp","components","ColorIndicator","BaseControl","blockEditor","editor","ColorPalette","BaseLabel","VisualLabel","label","value","onChange","Button","DateTimePicker","Popover","Tooltip","element","Fragment","useState","__","i18n","popupState","setPopupState","togglePopup","state","buttonLabel","dateLabel","date","onChangeDate","onDateClear","onInvalidDate","moment","format","bind","wpI18n","wpHooks","wpBlocks","wpBlockEditor","wpComponents","wpCompose","addFilter","hasBlockSupport","InspectorControls","ToggleControl","PanelBody","PanelRow","Notice","createHigherOrderComponent","SUPPORTED_BLOCKS","parseInt","advgbBlocks","block_visibility","settings","includes","name","attributes","bvEnabled","type","default","bvDateFrom","bvDateTo","bvRecur","BlockEdit","isSelected","setAttributes","newDate","thisDate","Date","getTime","setHours","fromDate","withAttributes","BlockListBlock","advgbBvClass","hooks","blocks","compose"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;;;;QClFgBA,e,GAAAA,e;QAyBAC,kB,GAAAA,kB;AAzBT,SAASD,eAAT,CAAyBE,KAAzB,EAAgC;AAAA,yBACGC,GAAGC,UADN;AAAA,QAC5BC,cAD4B,kBAC5BA,cAD4B;AAAA,QACZC,WADY,kBACZA,WADY;;AAAA,eAEZH,GAAGI,WAAH,IAAkBJ,GAAGK,MAFT;AAAA,QAE5BC,YAF4B,QAE5BA,YAF4B;;AAGnC,QAAMC,YAAYJ,YAAYK,WAAZ,GAA0BL,YAAYK,WAAtC,GAAoD,MAAtE;;AAHmC,QAK5BC,KAL4B,GAKFV,KALE,CAK5BU,KAL4B;AAAA,QAKrBC,KALqB,GAKFX,KALE,CAKrBW,KALqB;AAAA,QAKdC,QALc,GAKFZ,KALE,CAKdY,QALc;;AAMnC,WACI;AAAC,mBAAD;AAAA;AACI,uBAAU;AADd;AAGI;AAAC,qBAAD;AAAA,cAAW,WAAU,gCAArB;AACKF,iBADL;AAEKC,qBACG,oBAAC,cAAD,IAAgB,YAAYA,KAA5B;AAHR,SAHJ;AASI,4BAAC,YAAD;AACI,uBAAU,+FADd;AAEI,mBAAOA,KAFX;AAGI,sBAAUC;AAHd;AATJ,KADJ;AAiBH;;AAEM,SAASb,kBAAT,CAA4BC,KAA5B,EAAmC;AAAA,0BACgBC,GAAGC,UADnB;AAAA,QAC9BW,MAD8B,mBAC9BA,MAD8B;AAAA,QACtBC,cADsB,mBACtBA,cADsB;AAAA,QACLC,OADK,mBACLA,OADK;AAAA,QACIC,OADJ,mBACIA,OADJ;AAAA,sBAEPf,GAAGgB,OAFI;AAAA,QAE9BC,QAF8B,eAE9BA,QAF8B;AAAA,QAEpBC,QAFoB,eAEpBA,QAFoB;AAAA,QAG9BC,EAH8B,GAGvBnB,GAAGoB,IAHoB,CAG9BD,EAH8B;;AAAA,oBAKFD,SAAU,KAAV,CALE;AAAA;AAAA,QAK/BG,UAL+B;AAAA,QAKnBC,aALmB;;AAMtC,QAAMC,cAAc,SAAdA,WAAc,GAAM;AACtBD,sBAAe,UAAEE,KAAF;AAAA,mBAAa,CAAEA,KAAf;AAAA,SAAf;AACH,KAFD;;AANsC,QAWlCC,WAXkC,GAiBlC1B,KAjBkC,CAWlC0B,WAXkC;AAAA,QAYlCC,SAZkC,GAiBlC3B,KAjBkC,CAYlC2B,SAZkC;AAAA,QAalCC,IAbkC,GAiBlC5B,KAjBkC,CAalC4B,IAbkC;AAAA,QAclCC,YAdkC,GAiBlC7B,KAjBkC,CAclC6B,YAdkC;AAAA,QAelCC,WAfkC,GAiBlC9B,KAjBkC,CAelC8B,WAfkC;AAAA,QAgBlCC,aAhBkC,GAiBlC/B,KAjBkC,CAgBlC+B,aAhBkC;;;AAmBtC,WACI;AAAC,gBAAD;AAAA;AACI;AAAA;AAAA,cAAK,WAAU,2BAAf;AACI;AAAA;AAAA;AACMJ;AADN,aADJ;AAII;AAAA;AAAA;AACI;AAAC,0BAAD;AAAA;AACI,oCADJ;AAEI,8BAAK,UAFT;AAGI,iCAAU;AAAA,mCAAMJ,cAAeC,WAAf,CAAN;AAAA;AAHd;AAKI;AAAC,+BAAD;AAAA,0BAAS,MAAOJ,GAAI,aAAJ,EAAmB,oBAAnB,CAAhB;AACI;AAAA;AAAA;AACMQ,mCAAOI,OAAQJ,IAAR,EAAeK,MAAf,CAAuB,sBAAvB,CAAP,GAAyDP;AAD/D;AADJ;AALJ,iBADJ;AAYME,wBACV,oBAAC,MAAD;AACC,0BAAK,QADN;AAEgB,+BAAU,+BAF1B;AAGC,6BAAU;AAAA,+BAAME,aAAN;AAAA;AAHX;AAbI;AAJJ,SADJ;AA0BMR,sBACE;AAAC,mBAAD;AAAA;AACI,2BAAU,2BADd;AAEI,yBAAUC,cAAcW,IAAd,CAAoB,IAApB,EAA0B,KAA1B;AAFd;AAII;AAAA;AAAA,kBAAO,WAAU,iCAAjB;AACMP,yBADN;AAEI,oCAAC,MAAD;AACX,0BAAK,QADM;AAEI,+BAAU,+BAFd;AAGX,6BAAU;AAAA,+BAAMJ,cAAeC,WAAf,CAAN;AAAA;AAHC;AAFJ,aAJJ;AAYI,gCAAC,cAAD;AACI,6BAAcI,IADlB;AAEI,0BAAWC,YAFf;AAGI,0BAAW,IAHf;AAII,+BAAgBE;AAJpB;AAZJ;AA3BR,KADJ;AAmDH,C;;;;;;;;;;;;;;;;AC/FD;;AAEA,CAAC,UAAWI,MAAX,EAAmBC,OAAnB,EAA4BC,QAA5B,EAAsCC,aAAtC,EAAqDC,YAArD,EAAmEC,SAAnE,EAA+E;AAC5EF,oBAAgBrC,GAAGI,WAAH,IAAkBJ,GAAGK,MAArC;AAD4E,QAEpEmC,SAFoE,GAEtDL,OAFsD,CAEpEK,SAFoE;AAAA,QAGpErB,EAHoE,GAG7De,MAH6D,CAGpEf,EAHoE;AAAA,QAIpEsB,eAJoE,GAIhDL,QAJgD,CAIpEK,eAJoE;AAAA,yBAK9CJ,aAL8C;AAAA,QAKpEK,iBALoE,kBAKpEA,iBALoE;AAAA,QAMpE7B,cANoE,GAMGyB,YANH,CAMpEzB,cANoE;AAAA,QAMpD8B,aANoD,GAMGL,YANH,CAMpDK,aANoD;AAAA,QAMrCC,SANqC,GAMGN,YANH,CAMrCM,SANqC;AAAA,QAM1BC,QAN0B,GAMGP,YANH,CAM1BO,QAN0B;AAAA,QAMhBjC,MANgB,GAMG0B,YANH,CAMhB1B,MANgB;AAAA,QAMRkC,MANQ,GAMGR,YANH,CAMRQ,MANQ;AAAA,QAOpEC,0BAPoE,GAOrCR,SAPqC,CAOpEQ,0BAPoE;AAAA,QAQpE9B,QARoE,GAQvDjB,GAAGgB,OARoD,CAQpEC,QARoE;;AAU5E;AACA;;AACA,QAAM+B,mBAAmB,IAAzB;;AAEA;AACA,QAAI,CAACC,SAASC,YAAYC,gBAArB,CAAL,EAA8C;;AAE9C;AACAX,cAAW,0BAAX,EAAuC,uBAAvC,EAAgE,UAAWY,QAAX,EAAsB;AAClF,YAAI,CAACJ,gBAAD,IAAqBA,iBAAiBK,QAAjB,CAA2BD,SAASE,IAApC,CAAzB,EAAqE;AACjEF,qBAASG,UAAT,GAAsB,SAAeH,SAASG,UAAxB,EAAoC;AACtDC,2BAAW;AACPC,0BAAM,SADC;AAEPC,6BAAS;AAFF,iBAD2C;AAKtDC,4BAAY;AACRF,0BAAM;AADE,iBAL0C;AAQtDG,0BAAU;AACNH,0BAAM;AADA,iBAR4C;AAWtDI,yBAAS;AACLJ,0BAAM,SADD;AAELC,6BAAS;AAFJ;AAX6C,aAApC,CAAtB;AAgBH;;AAED,eAAON,QAAP;AACH,KArBD;;AAuBA;AACAZ,cAAW,kBAAX,EAA+B,0BAA/B,EAA2D,UAAWsB,SAAX,EAAuB;AAC9E,eAAO,UAAE/D,KAAF,EAAa;AAAA,oCAMRA,MAAMwD,UANE;AAAA,gBAERC,SAFQ,qBAERA,SAFQ;AAAA,gBAGRG,UAHQ,qBAGRA,UAHQ;AAAA,gBAIRC,QAJQ,qBAIRA,QAJQ;AAAA,gBAKRC,OALQ,qBAKRA,OALQ;;;AAQhB,mBAAS,CACL9D,MAAMgE,UAAN,KAAqB,CAACf,gBAAD,IAAqBA,iBAAiBK,QAAjB,CAA2BtD,MAAMuD,IAAjC,CAA1C,KACA;AAAC,iCAAD;AAAA,kBAAmB,KAAI,mBAAvB;AACQ;AAAC,6BAAD;AAAA;AACI,+BAAQnC,GAAI,kBAAJ,EAAwB,oBAAxB,CADZ;AAEI,8BAAK,YAFT;AAGI,qCAAc,KAHlB;AAII,mCAAYqC,cAAeG,cAAcC,QAA7B,IAA0C,qBAA1C,GAAkE;AAJlF;AAMI,wCAAC,aAAD;AACI,+BAAQzC,GAAI,uBAAJ,EAA6B,oBAA7B,CADZ;AAEI,iCAAUqC,SAFd;AAGI,kCAAW;AAAA,mCAAMzD,MAAMiE,aAAN,CAAqB,EAAER,WAAW,CAACA,SAAd,EAArB,CAAN;AAAA;AAHf,sBANJ;AAWMA,iCACE;AAAC,gCAAD;AAAA;AACI,4CAAC,8BAAD;AACI,yCAAcrC,GAAI,KAAJ,EAAW,oBAAX,CADlB;AAEI,uCAAYA,GAAI,eAAJ,EAAqB,oBAArB,CAFhB;AAGI,kCAAOwC,UAHX;AAII,0CAAe,sBAAEM,OAAF,EAAe;AAAElE,sCAAMiE,aAAN,CAAqB,EAAEL,YAAYM,OAAd,EAArB;AAAiD,6BAJrF;AAKI,yCAAc;AAAA,uCAAMlE,MAAMiE,aAAN,CAAqB,EAAEL,YAAY,IAAd,EAArB,CAAN;AAAA,6BALlB;AAMI,2CAAgB;AANpB,0BADJ;AASI,4CAAC,8BAAD;AACI,yCAAcxC,GAAI,OAAJ,EAAa,oBAAb,CADlB;AAEI,uCAAYA,GAAI,cAAJ,EAAoB,oBAApB,CAFhB;AAGI,kCAAO,CAAC,CAACyC,QAAF,GAAaA,QAAb,GAAwB,IAHnC;AAII,0CAAe,sBAAEK,OAAF,EAAe;AAAElE,sCAAMiE,aAAN,CAAqB,EAAEJ,UAAUK,OAAZ,EAArB;AAA+C,6BAJnF;AAKI,yCAAc;AAAA,uCAAMlE,MAAMiE,aAAN,CAAqB,EAAEJ,UAAU,IAAZ,EAArB,CAAN;AAAA,6BALlB;AAMI,2CAAgB,uBAAEjC,IAAF,EAAY;AACxB;AACA,oCAAIgC,UAAJ,EAAiB;AACb,wCAAIO,WAAW,IAAIC,IAAJ,CAASxC,KAAKyC,OAAL,EAAT,CAAf;AACAF,6CAASG,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B;AACA,wCAAIC,WAAW,IAAIH,IAAJ,CAASR,UAAT,CAAf;AACAW,6CAASD,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B;AACA,2CAAOH,SAASE,OAAT,KAAqBE,SAASF,OAAT,EAA5B;AACH;AACJ;AAfL,0BATJ;AA0BQT,qCAAaC,QAAf,IACE;AAAC,kCAAD;AAAA;AACI,2CAAU,sBADd;AAEI,wCAAO,SAFX;AAGI,+CAAgB;AAHpB;AAKMzC,+BAAI,6CAAJ,EAAmD,oBAAnD;AALN,yBA3BR;AAmCMwC,sCAAcC,QAAd,IACE,oBAAC,aAAD;AACI,mCAAQzC,GAAI,WAAJ,EAAiB,oBAAjB,CADZ;AAEI,qCAAU0C,OAFd;AAGI,sCAAW;AAAA,uCAAM9D,MAAMiE,aAAN,CAAqB,EAAEH,SAAS,CAACA,OAAZ,EAArB,CAAN;AAAA,6BAHf;AAII,kCAAO1C,GAAI,oDAAJ,EAA0D,oBAA1D;AAJX;AApCR;AAZR;AADR,aAFK,EA8DL,oBAAC,SAAD,aAAW,KAAI,wBAAf,IAA4CpB,KAA5C,EA9DK,CAAT;AAgEH,SAxED;AAyEH,KA1ED;;AA4EA,QAAMwE,iBAAiBxB,2BAA4B,UAAEyB,cAAF,EAAsB;AACrE,eAAO,UAAEzE,KAAF,EAAa;AAChB,gBAAK,CAAE,CAAEiD,gBAAF,IAAsBA,iBAAiBK,QAAjB,CAA2BtD,MAAMuD,IAAjC,CAAxB,KAAqEb,gBAAiB1C,MAAMuD,IAAvB,EAA6B,uBAA7B,EAAsD,IAAtD,CAA1E,EAAyI;AAAA,yCAMjIvD,MAAMwD,UAN2H;AAAA,oBAEjIC,SAFiI,sBAEjIA,SAFiI;AAAA,oBAGjIG,UAHiI,sBAGjIA,UAHiI;AAAA,oBAIjIC,QAJiI,sBAIjIA,QAJiI;AAAA,oBAKjIC,OALiI,sBAKjIA,OALiI;;;AAQrI,oBAAMY,eAAe1E,MAAMgE,UAAN,KAAqB,KAArB,IAA8BP,SAA9B,KAA6CG,cAAcC,QAA3D,IACf,yBADe,GACa,EADlC;;AAGA,uBAAO,oBAAC,cAAD,eAAqB7D,KAArB,IAA6B,WAAY0E,YAAzC,EAAwD,iBAAiBd,UAAzE,EAAyF,eAAeC,QAAxG,EAAsH,gBAAgBJ,SAAtI,EAAqJ,cAAcK,OAAnK,IAAP;AACH;;AAED,mBAAO,oBAAC,cAAD,EAAqB9D,KAArB,CAAP;AACH,SAhBD;AAiBH,KAlBsB,EAkBpB,gBAlBoB,CAAvB;;AAoBA;AACAC,OAAG0E,KAAH,CAASlC,SAAT,CAAoB,uBAApB,EAA6C,kCAA7C,EAAiF+B,cAAjF;AAEH,CA7ID,EA6IIvE,GAAGoB,IA7IP,EA6IapB,GAAG0E,KA7IhB,EA6IuB1E,GAAG2E,MA7I1B,EA6IkC3E,GAAGI,WA7IrC,EA6IkDJ,GAAGC,UA7IrD,EA6IiED,GAAG4E,OA7IpE,E","file":"block-visibility.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export function AdvColorControl(props) {\n    const {ColorIndicator, BaseControl} = wp.components;\n    const {ColorPalette} = wp.blockEditor || wp.editor;\n    const BaseLabel = BaseControl.VisualLabel ? BaseControl.VisualLabel : \"span\";\n\n    const {label, value, onChange} = props;\n    return (\n        <BaseControl\n            className=\"editor-color-palette-control block-editor-color-palette-control\"\n        >\n            <BaseLabel className=\"components-base-control__label\">\n                {label}\n                {value && (\n                    <ColorIndicator colorValue={value} />\n                )}\n            </BaseLabel>\n            <ColorPalette\n                className=\"editor-color-palette-control__color-palette block-editor-color-palette-control__color-palette\"\n                value={value}\n                onChange={onChange}\n            />\n        </BaseControl>\n    )\n}\n\nexport function AdvDateTimeControl(props) {\n    const { Button, DateTimePicker,  Popover, Tooltip } = wp.components;\n    const { Fragment, useState } = wp.element;\n    const { __ } = wp.i18n;\n\n    const [popupState, setPopupState] = useState( false );\n    const togglePopup = () => {\n        setPopupState( ( state ) => ! state );\n    };\n\n    const {\n        buttonLabel,\n        dateLabel,\n        date,\n        onChangeDate,\n        onDateClear,\n        onInvalidDate\n    } = props;\n\n    return (\n        <Fragment>\n            <div className=\"advgb-advcalendar-control\">\n                <label>\n                    { dateLabel }\n                </label>\n                <div>\n                    <Button\n                        isLink\n                        icon=\"calendar\"\n                        onClick={ () => setPopupState( togglePopup ) }\n                    >\n                        <Tooltip text={ __( 'Change date', 'advanced-gutenberg' ) }>\n                            <span>\n                                { date ? moment( date ).format( \"MMMM DD YYYY, h:mm a\" ) : buttonLabel }\n                            </span>\n                        </Tooltip>\n                    </Button>\n                    { date &&\n        \t\t\t\t<Button\n        \t\t\t\t\ticon=\"no-alt\"\n                            className=\"advgb-advcalendar-remove-icon\"\n        \t\t\t\t\tonClick={ () => onDateClear() }\n        \t\t\t\t/>\n        \t\t\t}\n                </div>\n            </div>\n            { popupState &&\n                <Popover\n                    className=\"advgb-advcalendar-popover\"\n                    onClose={ setPopupState.bind( null, false ) }\n                >\n                    <label className=\"advgb-advcalendar-popover-label\">\n                        { dateLabel }\n                        <Button\n        \t\t\t\t\ticon=\"no-alt\"\n                            className=\"advgb-advcalendar-remove-icon\"\n        \t\t\t\t\tonClick={ () => setPopupState( togglePopup ) }\n        \t\t\t\t/>\n                    </label>\n                    <DateTimePicker\n                        currentDate={ date }\n                        onChange={ onChangeDate }\n                        is12Hour={ true }\n                        isInvalidDate={ onInvalidDate }\n                    />\n                </Popover>\n            }\n        </Fragment>\n\n    )\n}\n","import { AdvDateTimeControl } from \"../0-adv-components/components.jsx\";\n\n(function ( wpI18n, wpHooks, wpBlocks, wpBlockEditor, wpComponents, wpCompose ) {\n    wpBlockEditor = wp.blockEditor || wp.editor;\n    const { addFilter } = wpHooks;\n    const { __ } = wpI18n;\n    const { hasBlockSupport } = wpBlocks;\n    const { InspectorControls } = wpBlockEditor;\n    const { DateTimePicker, ToggleControl, PanelBody, PanelRow, Button, Notice } = wpComponents;\n    const { createHigherOrderComponent } = wpCompose;\n    const { Fragment } = wp.element;\n\n    // null: all blocks supported\n    // non-empty array: only the specified blocks supported\n    const SUPPORTED_BLOCKS = null;\n\n    // do not show this feature if disabled.\n    if( !parseInt(advgbBlocks.block_visibility) ) return;\n\n    // Register block visibility to blocks attributes\n    addFilter( 'blocks.registerBlockType', 'advgb/blockVisibility', function ( settings ) {\n        if (!SUPPORTED_BLOCKS || SUPPORTED_BLOCKS.includes( settings.name )) {\n            settings.attributes = Object.assign( settings.attributes, {\n                bvEnabled: {\n                    type: 'boolean',\n                    default: false\n                },\n                bvDateFrom: {\n                    type: 'string'\n                },\n                bvDateTo: {\n                    type: 'string'\n                },\n                bvRecur: {\n                    type: 'boolean',\n                    default: false\n                },\n            } );\n        }\n\n        return settings;\n    } );\n\n    // Add option to add dates for supported blocks\n    addFilter( 'editor.BlockEdit', 'advgb/addBlockVisibility', function ( BlockEdit ) {\n        return ( props ) => {\n                const {\n                    bvEnabled,\n                    bvDateFrom,\n                    bvDateTo,\n                    bvRecur,\n                } = props.attributes;\n\n            return ( [\n                props.isSelected && (!SUPPORTED_BLOCKS || SUPPORTED_BLOCKS.includes( props.name )) &&\n                <InspectorControls key=\"advgb-bv-controls\">\n                        <PanelBody\n                            title={ __( 'Block Visibility', 'advanced-gutenberg' ) }\n                            icon=\"visibility\"\n                            initialOpen={ false }\n                            className={ bvEnabled && ( bvDateFrom || bvDateTo ) ? 'advgb-bv-panel-icon' : '' }\n                        >\n                            <ToggleControl\n                                label={ __( 'Enable block schedule', 'advanced-gutenberg' ) }\n                                checked={ bvEnabled }\n                                onChange={ () => props.setAttributes( { bvEnabled: !bvEnabled } ) }\n                            />\n                            { bvEnabled && (\n                                <Fragment>\n                                    <AdvDateTimeControl\n                                        buttonLabel={ __( 'Now', 'advanced-gutenberg' ) }\n                                        dateLabel={ __( 'Start showing', 'advanced-gutenberg' ) }\n                                        date={ bvDateFrom }\n                                        onChangeDate={ ( newDate ) => { props.setAttributes( { bvDateFrom: newDate } ); } }\n                                        onDateClear={ () => props.setAttributes( { bvDateFrom: null } ) }\n                                        onInvalidDate={ false }\n                                    />\n                                    <AdvDateTimeControl\n                                        buttonLabel={ __( 'Never', 'advanced-gutenberg' ) }\n                                        dateLabel={ __( 'Stop showing', 'advanced-gutenberg' ) }\n                                        date={ !!bvDateTo ? bvDateTo : null }\n                                        onChangeDate={ ( newDate ) => { props.setAttributes( { bvDateTo: newDate } ); } }\n                                        onDateClear={ () => props.setAttributes( { bvDateTo: null } ) }\n                                        onInvalidDate={ ( date ) => {\n                                            // Disable all dates before bvDateFrom\n                                            if( bvDateFrom ) {\n                                                let thisDate = new Date(date.getTime());\n                                                thisDate.setHours(0, 0, 0, 0);\n                                                let fromDate = new Date(bvDateFrom);\n                                                fromDate.setHours(0, 0, 0, 0);\n                                                return thisDate.getTime() < fromDate.getTime();\n                                            }\n                                        } }\n                                    />\n                                    { ( bvDateFrom > bvDateTo ) &&\n                                        <Notice\n                                            className=\"advgb-notice-sidebar\"\n                                            status=\"warning\"\n                                            isDismissible={ false }\n                                        >\n                                            { __( 'Stop showing should be after Start showing!', 'advanced-gutenberg' ) }\n                                        </Notice>\n                                    }\n                                    { bvDateFrom && bvDateTo &&\n                                        <ToggleControl\n                                            label={ __( 'Recurring', 'advanced-gutenberg' ) }\n                                            checked={ bvRecur }\n                                            onChange={ () => props.setAttributes( { bvRecur: !bvRecur } ) }\n                                            help={ __( 'Show the block within the date interval every year', 'advanced-gutenberg' ) }\n                                        />\n                                    }\n                                </Fragment>\n                            ) }\n                        </PanelBody>\n                </InspectorControls>,\n                <BlockEdit key=\"block-edit-advgb-dates\" {...props} />,\n            ] )\n        }\n    } );\n\n    const withAttributes = createHigherOrderComponent( ( BlockListBlock ) => {\n        return ( props ) => {\n            if ( ( ! SUPPORTED_BLOCKS || SUPPORTED_BLOCKS.includes( props.name ) ) && hasBlockSupport( props.name, 'advgb/blockVisibility', true ) ) {\n                const {\n                    bvEnabled,\n                    bvDateFrom,\n                    bvDateTo,\n                    bvRecur,\n                } = props.attributes;\n\n                const advgbBvClass = props.isSelected === false && bvEnabled && ( bvDateFrom || bvDateTo )\n                    ? 'advgb-bv-editor-preview' : '';\n\n                return <BlockListBlock { ...props } className={ advgbBvClass } bvDateFrom={ `${ bvDateFrom }` } bvDateTo={ `${ bvDateTo }` } bvEnabled={ `${ bvEnabled }` } bvRecur={ `${ bvRecur }` } />;\n            }\n\n            return <BlockListBlock { ...props } />;\n        };\n    }, 'withAttributes' );\n\n    // Apply custom styles on back-end\n    wp.hooks.addFilter( 'editor.BlockListBlock', 'advgb/loadBackendBlockVisibility', withAttributes );\n\n})( wp.i18n, wp.hooks, wp.blocks, wp.blockEditor, wp.components, wp.compose );\n"],"sourceRoot":""}